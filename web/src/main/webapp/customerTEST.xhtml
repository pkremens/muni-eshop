<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/templates/default.xhtml">
    <ui:define name="content">
        <h1>Users</h1>
        <h:form id="customersForm">
            <h:panelGroup rendered="#{customerController.emptyCustomerList}">
                <em>No users!</em>
            </h:panelGroup>
            <h:dataTable value="#{customerList}" var="_customer"
                         rendered="#{not customerController.emptyCustomerList}"  styleClass="order-table" headerClass="order-table-header" rowClasses="order-table-odd-row,order-table-even-row" >
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="EMAIL" />
                    </f:facet>
                    <h:outputText value="#{_customer.email}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="NAME" />
                    </f:facet>
                    <h:outputText value="#{_customer.name}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="PASSWORD" />
                    </f:facet>
                    <h:outputText value="#{_customer.password}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="ROLE" />
                    </f:facet>
                    <h:selectOneMenu value="#{_customer.role}" id="role"
                                     disabled="#{!_customer.editable}">
                        <f:selectItem itemValue="BASIC" itemLabel="User" />
                        <f:selectItem itemValue="SELLER" itemLabel="Seller" />
                        <f:selectItem itemValue="ADMIN" itemLabel="Administrator" />
                    </h:selectOneMenu>&#160;&#160;
                </h:column>

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="ACTION" />
                    </f:facet>
                    <h:commandButton id="editB" value="Edit"
                                     action="#{customerController.editAction(_customer)}"
                                     disabled="#{_customer.editable}">
                        <f:ajax execute="role" render="editB saveB role" />
                    </h:commandButton>&#160;&#160;
                    <h:commandButton id="saveB" value="Save"
                                     action="#{customerController.saveAction(_customer)}"
                                     disabled="#{!_customer.editable}">
                        <f:ajax execute="role" render="editB saveB role" />
                    </h:commandButton>&#160;&#160;

                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="REST URL" />
                    </f:facet>
                    <a href="#{request.contextPath}/rest/customers/#{_customer.email}">/rest/customers/#{_customer.email}</a>
                </h:column>
            </h:dataTable>
            <br />
            REST URL for all customers<a href="#{request.contextPath}/rest/customers">/rest/customers</a>

        </h:form>

        <br />
        <hr />
        <br />

        <h1>Add user</h1>
        <h:form id="addCustomerForm">

            <h:panelGrid columns="3">
                <h:outputLabel value="Email" for="email" />
                <h:inputText id="email" value="#{newCustomer.email}" />
                <h:message for="email" errorClass="invalid" />

                <h:outputLabel value="Name" for="name" />
                <h:inputText id="name" value="#{newCustomer.name}" />
                <h:message for="name" errorClass="invalid" />

                <h:outputLabel value="Password" for="password" />
                <h:inputSecret id="password" value="#{newCustomer.password}" />
                <h:message for="password" errorClass="invalid" />

                <h:outputLabel value="Role" for="role" />
                <h:panelGrid columns="1">
                    <h:column>
                        <h:selectOneMenu value="#{newCustomer.role}" id="role">
                            <f:selectItem itemValue="BASIC" itemLabel="User" />
                            <f:selectItem itemValue="SELLER" itemLabel="Seller" />
                            <f:selectItem itemValue="ADMIN" itemLabel="Administrator" />
                        </h:selectOneMenu>
                    </h:column>
                </h:panelGrid>
                <h:message for="role" errorClass="invalid" />

            </h:panelGrid>
            <h:commandButton id="registerButton"
                             action="#{customerController.register()}" value="Add User">
                <f:ajax execute="@form" render="@form :customersForm" />
            </h:commandButton>
            <br />
            <h:message for="registerButton" />

        </h:form>


    </ui:define>
</ui:composition>